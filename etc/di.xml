<?xml version="1.0"?>
<!--
/**
 * Copyright Â© Resurs Bank AB. All rights reserved.
 * See LICENSE for license details.
 */
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <!-- Avoid loading custom checkout layout when module is inactive. -->
    <type name="Magento\Framework\View\Layout\File\Collector\Aggregated">
        <plugin
            name="resursbank_simplified_layout_file_collector"
            type="Resursbank\Simplified\Plugin\Layout\File\Collector" />
    </type>

    <!-- Inject this payment method into Core's Flow setting. -->
    <type name="Resursbank\Core\Model\Config\Source\Flow">
        <plugin
            name="resursbank_simplified_config_add_config_option"
            type="Resursbank\Simplified\Plugin\Config\AddConfigOption" />
    </type>

    <!-- Append dynamic information to compiled layout XML. -->
    <type name="Magento\Checkout\Block\Checkout\LayoutProcessor">
        <plugin
            name="resursbank_simplified_layout"
            type="Resursbank\Simplified\Plugin\Layout\Layout" />
    </type>

    <!-- Checkout success page. -->
    <type name="Magento\Checkout\Controller\Onepage\Success">
        <plugin
            name="resursbank_simplified_order_success"
            type="Resursbank\Simplified\Plugin\Order\Success" />
    </type>

    <!-- Checkout success page. -->
    <type name="Magento\Checkout\Controller\Onepage\Success">
        <plugin
            name="resursbank_simplified_order_success"
            type="Resursbank\Simplified\Plugin\Order\Success" />
    </type>

    <!-- Create payment at Resurs Bank during authorization. -->
    <type name="Resursbank\Core\Gateway\Command\Authorize">
        <plugin
            name="resursbank_simplified_gateway_command_authorize"
            type="Resursbank\Simplified\Plugin\Gateway\Command\Authorize" />
    </type>
</config>
